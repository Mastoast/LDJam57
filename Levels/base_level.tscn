[gd_scene load_steps=23 format=3 uid="uid://brtkqmlu6ql84"]

[ext_resource type="Script" uid="uid://34prymo77uoe" path="res://Levels/base_level.gd" id="1_2kef7"]
[ext_resource type="PackedScene" uid="uid://bq38f2ek6wl00" path="res://Levels/sky_entrance.tscn" id="3_2ed4s"]
[ext_resource type="PackedScene" uid="uid://cmbe6p5xvc2kp" path="res://Player/music_listener.tscn" id="3_n4mxg"]
[ext_resource type="PackedScene" uid="uid://cirkva4eojwhw" path="res://Player/player.tscn" id="3_ruyyf"]
[ext_resource type="PackedScene" uid="uid://bjpcwi3pflktf" path="res://Levels/map.tscn" id="6_6jk1m"]
[ext_resource type="Texture2D" uid="uid://20yxdlcmgsxg" path="res://Assets/Textures/map/map_fond.png" id="7_npxkb"]
[ext_resource type="PackedScene" uid="uid://ynx4yyvsthry" path="res://Levels/save background objets placement/parallax_2d.tscn" id="11_wf03h"]
[ext_resource type="PackedScene" uid="uid://dyg5ow1ayujjf" path="res://Levels/save background objets placement/back_objects.tscn" id="12_wf03h"]
[ext_resource type="PackedScene" uid="uid://iwcd2o8485vw" path="res://Levels/save background objets placement/back_objects_2.tscn" id="13_2ed4s"]
[ext_resource type="AnimationLibrary" uid="uid://g7b4r3bg5pd6" path="res://Animations/base_level.res" id="13_wf03h"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_n4mxg"]
light_mode = 2

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6jk1m"]
size = Vector2(925, 402)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2kef7"]
size = Vector2(859.5, 364.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wf03h"]
size = Vector2(579.5, 430)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2ed4s"]
size = Vector2(825, 694)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_mqdjw"]
size = Vector2(1569.5, 703)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ealwv"]
size = Vector2(1075.56, 890.875)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4mi1v"]
size = Vector2(5374, 2090)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8ftg7"]
size = Vector2(5374, 2461)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x3nl1"]
size = Vector2(5374, 2543)

[sub_resource type="Animation" id="Animation_wf03h"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Player:generic_sonar_enabled")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Player:organic_sonar_enabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wf03h"]
_data = {
&"RESET": SubResource("Animation_wf03h")
}

[node name="BaseLevel" type="Node2D"]
material = SubResource("CanvasItemMaterial_n4mxg")
script = ExtResource("1_2kef7")
intro_enabled = false

[node name="DialogueAudioStreamPlayer" type="AudioStreamPlayer2D" parent="."]
position = Vector2(1462, 3910)
max_distance = 5000.0
attenuation = 0.0001
bus = &"Voices"
playback_type = 1

[node name="Dialogue boxes" type="Node" parent="."]

[node name="Dialogue 2 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 2 trigger"]
position = Vector2(-72.5, 764)
shape = SubResource("RectangleShape2D_6jk1m")

[node name="Dialogue 3 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 3 trigger"]
position = Vector2(-45, 1612.13)
shape = SubResource("RectangleShape2D_2kef7")

[node name="Dialogue 4 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 4 trigger"]
position = Vector2(3295, 2238)
shape = SubResource("RectangleShape2D_wf03h")

[node name="Dialogue 5 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 5 trigger"]
position = Vector2(2321.5, 3736)
shape = SubResource("RectangleShape2D_2ed4s")

[node name="Dialogue 6 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 6 trigger"]
position = Vector2(2067.5, 4699.5)
shape = SubResource("RectangleShape2D_mqdjw")

[node name="Dialogue 7 trigger" type="Area2D" parent="Dialogue boxes"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Dialogue boxes/Dialogue 7 trigger"]
position = Vector2(87.2188, 6805.44)
shape = SubResource("RectangleShape2D_ealwv")

[node name="ColorChange" type="Node" parent="."]

[node name="Area2D" type="Area2D" parent="ColorChange"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="ColorChange/Area2D"]
position = Vector2(1416, 1610)
shape = SubResource("RectangleShape2D_4mi1v")

[node name="Area2D2" type="Area2D" parent="ColorChange"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="ColorChange/Area2D2"]
position = Vector2(1416, 3885.5)
shape = SubResource("RectangleShape2D_8ftg7")

[node name="Area2D3" type="Area2D" parent="ColorChange"]

[node name="CollisionShape2D3" type="CollisionShape2D" parent="ColorChange/Area2D3"]
position = Vector2(1416, 6387.5)
shape = SubResource("RectangleShape2D_x3nl1")

[node name="MusicListener" parent="." instance=ExtResource("3_n4mxg")]
player_dash = 1.0
player_big_dash = 2.0

[node name="SkyEntrance" parent="." instance=ExtResource("3_2ed4s")]

[node name="Player" parent="." instance=ExtResource("3_ruyyf")]
position = Vector2(0, -144)
baseDashForce = 200.0

[node name="Map" parent="." instance=ExtResource("6_6jk1m")]

[node name="MapVisible" parent="Map" index="1"]
visible = true

[node name="MapForSonarWhite" parent="Map" index="2"]
visible = true

[node name="GrottoBackSonarWhite" parent="Map" index="5"]
visible = true

[node name="Polygon2D2" type="Polygon2D" parent="Map"]
position = Vector2(-701, -325.963)
scale = Vector2(1, 3.44008)
polygon = PackedVector2Array(-1, 1.15207, -1, -450, 214, -450, 216, 1)

[node name="Polygon2D" type="Polygon2D" parent="Map"]
position = Vector2(447.986, -324.468)
scale = Vector2(1, 3.46785)
polygon = PackedVector2Array(-0.986176, 1.00006, -1, -450, 214, -450, 216, 1)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_wf03h"),
&"base_level": ExtResource("13_wf03h")
}

[node name="BackObjectsWhite" parent="." instance=ExtResource("12_wf03h")]

[node name="BackObjectsRed" parent="." instance=ExtResource("13_2ed4s")]

[node name="Parallax2D" parent="." instance=ExtResource("11_wf03h")]

[node name="GrottoBackParallaxVisible" type="Sprite2D" parent="Parallax2D"]
modulate = Color(1, 1, 1, 0.337255)
light_mask = 2
z_index = -2
use_parent_material = true
position = Vector2(828, 2245)
scale = Vector2(2, 2)
texture = ExtResource("7_npxkb")

[connection signal="body_entered" from="Dialogue boxes/Dialogue 2 trigger" to="." method="_on_first_sonar_activation"]
[connection signal="body_entered" from="Dialogue boxes/Dialogue 3 trigger" to="." method="_on_dialogue_3"]
[connection signal="body_entered" from="Dialogue boxes/Dialogue 4 trigger" to="." method="_on_dialogue_4"]
[connection signal="body_entered" from="Dialogue boxes/Dialogue 5 trigger" to="." method="_on_second_sonar_activation"]
[connection signal="body_entered" from="Dialogue boxes/Dialogue 6 trigger" to="." method="_on_dialogue_6"]
[connection signal="body_entered" from="Dialogue boxes/Dialogue 7 trigger" to="." method="_on_end_cutscene_trigger"]
[connection signal="emit_big_sonar" from="MusicListener" to="Player" method="_onBigSonar"]
[connection signal="emit_little_sonar" from="MusicListener" to="Player" method="_onSonar"]
[connection signal="move_ship" from="MusicListener" to="Player" method="_dash"]

[editable path="Map"]
